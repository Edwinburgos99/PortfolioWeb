---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout>
  <section id="Contact" class="relative min-h-[600px] py-8 md:py-12 w-full pt-8 px-6 md:px-20 shadow-xl py-4 lg:py-8 mt-24">
    <div class="rounded-lg shadow-2xl py-4 lg:py-8 px-4 mx-auto max-w-screen-md backdrop-blur-md bg-gradient-to-br from-gray-500 via-black to-gray-500
           [perspective:1000px]">
      <h2 class="mb-4 text-3xl md:text-4xl tracking-tight font-extrabold text-center text-white">Contacto</h2>
      <p class="mb-8 lg:mb-16 font-light text-center text-gray-200 sm:text-xl">¿Quieres trabajar conmigo? Déjame un mensaje.</p>
      
      <form id="contactForm" action="https://formspree.io/f/xwpnvbzw" method="POST" class="space-y-8">
        <div>
          <label for="email" class="block mb-2 text-sm font-medium text-gray-100 text-xl">Email</label>
          <input type="email" id="email" name="email" class="block p-3 w-full text-md text-gray-800 bg-white rounded-lg border border-gray-300 shadow-sm focus:ring-primary-500 focus:border-primary-500" placeholder="Correo@gmail.com" required>
        </div>

        <div>
          <label for="subject" class="block mb-2 text-sm font-medium text-gray-100 text-xl">Asunto</label>
          <input type="text" id="subject" name="subject" class="block p-3 w-full text-md text-gray-800 bg-white rounded-lg border border-gray-300 shadow-sm focus:ring-primary-500 focus:border-primary-500" placeholder="Asunto" required>
        </div>

        <div class="sm:col-span-2">
          <label for="message" class="block mb-2 text-sm font-medium text-gray-100 text-xl">Mensaje</label>
          <textarea id="message" name="message" rows="6" class="block p-2.5 w-full text-md text-gray-800 bg-white rounded-lg shadow-sm border border-gray-300 focus:ring-primary-500 focus:border-primary-500" placeholder="Déjame un mensaje..."></textarea>
        </div>

        <div class="flex flex-col items-center">
          <button type="submit" class="py-3 px-6 text-lg font-semibold text-center text-white rounded-lg bg-green-600 hover:bg-green-800 hover:shadow-3xl focus:bg-green-700 focus:shadow-xl focus:ring-4 focus:outline-none focus:ring-blue-300 active:bg-green-900 active:shadow-inner shadow-lg transition duration-300">Enviar Mensaje</button>
        </div>

        <p id="formStatus" class="text-center mt-4 text-lg font-medium"></p>
      </form>

      <script type="module">
        const form = document.getElementById("contactForm");
        const statusMessage = document.getElementById("formStatus");

        if (form && statusMessage) {
          form.addEventListener("submit", async (e) => {
            e.preventDefault();
            const formData = new FormData(form);

            try {
              const response = await fetch(form.action, {
                method: form.method,
                body: formData,
                headers: { 'Accept': 'application/json' }
              });

              if (response.ok) {
                statusMessage.textContent = "✅ Tu mensaje ha sido enviado correctamente.";
                statusMessage.className = "text-gray-900 text-center mt-4 text-lg font-medium";
                form.reset();
              } else {
                statusMessage.textContent = "❌ Ocurrió un error al enviar tu mensaje. Intenta nuevamente.";
                statusMessage.className = "text-red-900 text-center mt-4 text-lg font-medium";
              }
            } catch (error) {
              statusMessage.textContent = "❌ Error de conexión. Por favor, revisa tu internet.";
              statusMessage.className = "text-red-500 text-center mt-4 text-lg font-medium";
            }
          });
        }
      </script>
    </div>
  </section>
</BaseLayout>
